System.register(["jimu-core","jimu-ui","jimu-core/react"], function(__WEBPACK_DYNAMIC_EXPORT__, __system_context__) {
	var __WEBPACK_EXTERNAL_MODULE_jimu_core__ = {};
	var __WEBPACK_EXTERNAL_MODULE_jimu_ui__ = {};
	var __WEBPACK_EXTERNAL_MODULE_react__ = {};
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_core__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_jimu_ui__, "__esModule", { value: true });
	Object.defineProperty(__WEBPACK_EXTERNAL_MODULE_react__, "__esModule", { value: true });
	return {
		setters: [
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_core__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_jimu_ui__[key] = module[key];
				});
			},
			function(module) {
				Object.keys(module).forEach(function(key) {
					__WEBPACK_EXTERNAL_MODULE_react__[key] = module[key];
				});
			}
		],
		execute: function() {
			__WEBPACK_DYNAMIC_EXPORT__(
/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./your-extensions/widgets/RefrescarPagina/assets/actualizar.svg":
/*!***********************************************************************!*\
  !*** ./your-extensions/widgets/RefrescarPagina/assets/actualizar.svg ***!
  \***********************************************************************/
/***/ ((module) => {

module.exports = "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTEyIDUxMiIgaGVpZ2h0PSI1MTJweCIgaWQ9IkxheWVyXzEiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTJweCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGc+PHBhdGggZD0iICAgTTMyMCwyMjJsNDIsMTNjLTkuOC00OS42LTUzLjUtODctMTA2LTg3cy05Ni4yLDM3LjQtMTA2LDg3IiBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEwIi8+PGxpbmUgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3Ryb2tlLXdpZHRoPSIxMCIgeDE9IjM4MSIgeDI9IjM2MiIgeTE9IjE5MS41IiB5Mj0iMjM1Ii8+PHBhdGggZD0iICAgTTE5MiwyOTBsLTQyLTEzYzkuOCw0OS42LDUzLjUsODcsMTA2LDg3czk2LjItMzcuNCwxMDYtODciIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIHN0cm9rZS13aWR0aD0iMTAiLz48bGluZSBmaWxsPSJub25lIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBzdHJva2Utd2lkdGg9IjEwIiB4MT0iMTMxIiB4Mj0iMTUwIiB5MT0iMzIwLjUiIHkyPSIyNzciLz48L2c+PC9zdmc+"

/***/ }),

/***/ "jimu-core":
/*!****************************!*\
  !*** external "jimu-core" ***!
  \****************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_core__;

/***/ }),

/***/ "react":
/*!**********************************!*\
  !*** external "jimu-core/react" ***!
  \**********************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_react__;

/***/ }),

/***/ "jimu-ui":
/*!**************************!*\
  !*** external "jimu-ui" ***!
  \**************************/
/***/ ((module) => {

"use strict";
module.exports = __WEBPACK_EXTERNAL_MODULE_jimu_ui__;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		__webpack_require__.p = "";
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other entry modules.
(() => {
/*!******************************************!*\
  !*** ./jimu-core/lib/set-public-path.ts ***!
  \******************************************/
/**
 * Webpack will replace __webpack_public_path__ with __webpack_require__.p to set the public path dynamically.
 * The reason why we can't set the publicPath in webpack config is: we change the publicPath when download.
 * */
// eslint-disable-next-line
// @ts-ignore
__webpack_require__.p = window.jimuConfig.baseUrl;

})();

// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!************************************************************************!*\
  !*** ./your-extensions/widgets/RefrescarPagina/src/runtime/widget.tsx ***!
  \************************************************************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   __set_webpack_public_path__: () => (/* binding */ __set_webpack_public_path__),
/* harmony export */   "default": () => (/* binding */ Widget)
/* harmony export */ });
/* harmony import */ var jimu_core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jimu-core */ "jimu-core");
/* harmony import */ var jimu_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jimu-ui */ "jimu-ui");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ "react");
/* harmony import */ var _RefrescarPagina_assets_actualizar_svg__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../RefrescarPagina/assets/actualizar.svg */ "./your-extensions/widgets/RefrescarPagina/assets/actualizar.svg");
/* harmony import */ var _RefrescarPagina_assets_actualizar_svg__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_RefrescarPagina_assets_actualizar_svg__WEBPACK_IMPORTED_MODULE_3__);
// widgets/RefrescarPagina/src/runtime/widget.tsx




/** Mantener estos filtros */
const WIDGETS_A_CONSERVAR = ['widget_17', 'widget_18', 'widget_19'];
/** DataSource principal */
const DS_ID = 'dataSource_1-AccidentesSeys_1709_5211';
/** Incluir Carretera en el WHERE del DS (si lo desactivas, el combo de Carretera listará todas) */
const INCLUDE_CARRETERA_IN_DS = true;
/** No “limpiar” estos filtros auxiliares por etiqueta */
const ETIQUETAS_FILTROS_A_IGNORAR = ['Filtros cruzados', 'Filtros activos'];
const deepClone = (o) => JSON.parse(JSON.stringify(o));
function readCurrentWhere() {
    var _a, _b, _c, _d;
    const s = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)().getState();
    return (_d = (_c = (_b = (_a = s === null || s === void 0 ? void 0 : s.dataSourcesInfo) === null || _a === void 0 ? void 0 : _a[DS_ID]) === null || _b === void 0 ? void 0 : _b.queryParams) === null || _c === void 0 ? void 0 : _c.where) !== null && _d !== void 0 ? _d : '';
}
function parseWhere(where) {
    const out = {};
    if (!where)
        return out;
    const mCar = where.match(/Carretera\s*=\s*'([^']+)'/i);
    if (mCar)
        out.carretera = mCar[1];
    const mPK = where.match(/PK\s+BETWEEN\s+(-?\d+(?:\.\d+)?)\s+AND\s+(-?\d+(?:\.\d+)?)/i);
    if (mPK)
        out.pk = { min: Number(mPK[1]), max: Number(mPK[2]) };
    const mAn = where.match(/Año\s+BETWEEN\s+(-?\d+)\s+AND\s+(-?\d+)/i);
    if (mAn)
        out.anio = { min: Number(mAn[1]), max: Number(mAn[2]) };
    return out;
}
function buildWhere(f) {
    const parts = [];
    if (f.carretera && INCLUDE_CARRETERA_IN_DS)
        parts.push(`(Carretera = '${f.carretera.replace(/'/g, "''")}')`);
    if (f.pk)
        parts.push(`((PK BETWEEN ${f.pk.min} AND ${f.pk.max}))`);
    if (f.anio)
        parts.push(`((Año BETWEEN ${f.anio.min} AND ${f.anio.max}))`);
    return parts.join(' AND ');
}
/** Fuerza cambio de cadena sin tocar semántica (espacios al final). Nada de comentarios ni 1=1. */
function bumpWhere(baseWhere) {
    if (!baseWhere || baseWhere.trim() === '')
        return '';
    const spaces = ' '.repeat((Date.now() % 5) + 1); // 1–5 espacios
    return baseWhere + spaces;
}
function applyWhereToDS(where, sourceWidgetId) {
    const dsm = jimu_core__WEBPACK_IMPORTED_MODULE_0__.DataSourceManager.getInstance();
    const ds = dsm.getDataSource(DS_ID);
    if (!ds)
        return;
    ds.updateQueryParams({ where }, sourceWidgetId);
}
function clearFilterConfigByJson(widgetId) {
    var _a, _b, _c;
    const store = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)();
    const widgets = (_c = (_b = (_a = store.getState()) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.widgets) !== null && _c !== void 0 ? _c : {};
    const w = widgets === null || widgets === void 0 ? void 0 : widgets[widgetId];
    if (!(w === null || w === void 0 ? void 0 : w.config))
        return;
    const newCfg = deepClone(w.config);
    const items = Array.isArray(newCfg === null || newCfg === void 0 ? void 0 : newCfg.filterItems) ? newCfg.filterItems : [];
    items.forEach((it) => {
        var _a;
        const parts = Array.isArray((_a = it === null || it === void 0 ? void 0 : it.sqlExprObj) === null || _a === void 0 ? void 0 : _a.parts) ? it.sqlExprObj.parts : [];
        parts.forEach((p) => {
            if (p === null || p === void 0 ? void 0 : p.valueOptions)
                p.valueOptions.value = [];
        });
        if (it === null || it === void 0 ? void 0 : it.sqlExprObj) {
            it.sqlExprObj.sql = '';
            it.sqlExprObj.displaySQL = '';
        }
    });
    // v1.14: usar widgetConfigLoaded; NO existe widgetConfigChange
    store.dispatch(jimu_core__WEBPACK_IMPORTED_MODULE_0__.appActions.widgetConfigLoaded(widgetId, newCfg));
}
function Widget(props) {
    const [isHovering, setIsHovering] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);
    const [showTooltip, setShowTooltip] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(false);
    const softResetExceptKeepers = () => {
        var _a, _b, _c;
        // 1) Leer lo que hay realmente aplicado
        const currentWhere = readCurrentWhere();
        const keep = parseWhere(currentWhere);
        const keeperWhere = buildWhere(keep);
        const bumped = bumpWhere(keeperWhere);
        // 2) Limpiar todos los Filter excepto 17/18/19 y los “especiales”
        const store = (0,jimu_core__WEBPACK_IMPORTED_MODULE_0__.getAppStore)();
        const widgets = (_c = (_b = (_a = store.getState()) === null || _a === void 0 ? void 0 : _a.appConfig) === null || _b === void 0 ? void 0 : _b.widgets) !== null && _c !== void 0 ? _c : {};
        Object.values(widgets)
            .filter(w => (w === null || w === void 0 ? void 0 : w.uri) === 'widgets/common/filter/')
            .forEach(w => {
            var _a, _b;
            if (WIDGETS_A_CONSERVAR.includes(w.id))
                return;
            const label = ((_a = w.label) !== null && _a !== void 0 ? _a : '').toString();
            const isEspecial = ETIQUETAS_FILTROS_A_IGNORAR.some(txt => label.toLowerCase().includes(txt.toLowerCase()));
            const hasItems = Array.isArray((_b = w === null || w === void 0 ? void 0 : w.config) === null || _b === void 0 ? void 0 : _b.filterItems) && w.config.filterItems.length > 0;
            if (!hasItems || isEspecial)
                return;
            clearFilterConfigByJson(w.id);
        });
        // 3) Aplicar directamente el WHERE (con “bump” para que siempre se propague)
        applyWhereToDS(bumped, props.id);
    };
    const buttonStyle = Object.assign({ borderRadius: '50%', width: '40px', height: '40px', minWidth: 'unset', minHeight: 'unset', backgroundColor: 'transparent', color: 'black', border: 'none', boxShadow: 'none', display: 'flex', alignItems: 'center', justifyContent: 'center', outline: 'none', paddingLeft: '25px' }, (isHovering ? { backgroundColor: 'rgba(0, 0, 0, 0.1)' } : {}));
    return (jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement("div", { onMouseEnter: () => setShowTooltip(true), onMouseLeave: () => setShowTooltip(false) },
        jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Tooltip, { title: "Eliminar filtros salvo Carretera, PK y A\u00F1o", placement: "top", showArrow: true, open: showTooltip, style: { backgroundColor: '#333', color: '#fff', fontSize: '0.9rem', borderRadius: '6px' } },
            jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Button, { type: "primary", onClick: softResetExceptKeepers, "aria-label": "Eliminar filtros", style: buttonStyle, onMouseEnter: () => setIsHovering(true), onMouseLeave: () => setIsHovering(false) },
                jimu_core__WEBPACK_IMPORTED_MODULE_0__.React.createElement(jimu_ui__WEBPACK_IMPORTED_MODULE_1__.Icon, { icon: (_RefrescarPagina_assets_actualizar_svg__WEBPACK_IMPORTED_MODULE_3___default()), size: "m", style: { display: 'block', width: '40px', height: '40px' } })))));
}
function __set_webpack_public_path__(url) { __webpack_require__.p = url; }

})();

/******/ 	return __webpack_exports__;
/******/ })()

			);
		}
	};
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0cy9SZWZyZXNjYXJQYWdpbmEvZGlzdC9ydW50aW1lL3dpZGdldC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxxQ0FBcUM7Ozs7Ozs7Ozs7O0FDQXJDOzs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7OztBQ0FBOzs7Ozs7VUNBQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EsaUNBQWlDLFdBQVc7V0FDNUM7V0FDQTs7Ozs7V0NQQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHlDQUF5Qyx3Q0FBd0M7V0FDakY7V0FDQTtXQUNBOzs7OztXQ1BBOzs7OztXQ0FBO1dBQ0E7V0FDQTtXQUNBLHVEQUF1RCxpQkFBaUI7V0FDeEU7V0FDQSxnREFBZ0QsYUFBYTtXQUM3RDs7Ozs7V0NOQTs7Ozs7Ozs7OztBQ0FBOzs7S0FHSztBQUNMLDJCQUEyQjtBQUMzQixhQUFhO0FBQ2IscUJBQXVCLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxPQUFPOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQ05uRCxpREFBaUQ7QUFDMkU7QUFDN0U7QUFDZjtBQUMrQztBQUUvRSw2QkFBNkI7QUFDN0IsTUFBTSxtQkFBbUIsR0FBRyxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUFVO0FBQzVFLDJCQUEyQjtBQUMzQixNQUFNLEtBQUssR0FBRyx1Q0FBdUM7QUFDckQsbUdBQW1HO0FBQ25HLE1BQU0sdUJBQXVCLEdBQUcsSUFBSTtBQUNwQyx5REFBeUQ7QUFDekQsTUFBTSwyQkFBMkIsR0FBRyxDQUFDLGtCQUFrQixFQUFFLGlCQUFpQixDQUFDO0FBUTNFLE1BQU0sU0FBUyxHQUFHLENBQUssQ0FBSSxFQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFFaEUsU0FBUyxnQkFBZ0I7O0lBQ3ZCLE1BQU0sQ0FBQyxHQUFHLHNEQUFXLEVBQUUsQ0FBQyxRQUFRLEVBQVM7SUFDekMsT0FBTyx5QkFBQyxhQUFELENBQUMsdUJBQUQsQ0FBQyxDQUFFLGVBQWUsMENBQUcsS0FBSyxDQUFDLDBDQUFFLFdBQVcsMENBQUUsS0FBSyxtQ0FBSSxFQUFFO0FBQzlELENBQUM7QUFFRCxTQUFTLFVBQVUsQ0FBQyxLQUFhO0lBQy9CLE1BQU0sR0FBRyxHQUFpQixFQUFFO0lBQzVCLElBQUksQ0FBQyxLQUFLO1FBQUUsT0FBTyxHQUFHO0lBQ3RCLE1BQU0sSUFBSSxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsNEJBQTRCLENBQUM7SUFDdEQsSUFBSSxJQUFJO1FBQUUsR0FBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLE1BQU0sR0FBRyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsNkRBQTZELENBQUM7SUFDdEYsSUFBSSxHQUFHO1FBQUUsR0FBRyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUM5RCxNQUFNLEdBQUcsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLDBDQUEwQyxDQUFDO0lBQ25FLElBQUksR0FBRztRQUFFLEdBQUcsQ0FBQyxJQUFJLEdBQUcsRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUU7SUFDaEUsT0FBTyxHQUFHO0FBQ1osQ0FBQztBQUVELFNBQVMsVUFBVSxDQUFDLENBQWU7SUFDakMsTUFBTSxLQUFLLEdBQWEsRUFBRTtJQUMxQixJQUFJLENBQUMsQ0FBQyxTQUFTLElBQUksdUJBQXVCO1FBQUUsS0FBSyxDQUFDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDNUcsSUFBSSxDQUFDLENBQUMsRUFBRTtRQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDbEUsSUFBSSxDQUFDLENBQUMsSUFBSTtRQUFFLEtBQUssQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7SUFDekUsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztBQUM1QixDQUFDO0FBRUQsbUdBQW1HO0FBQ25HLFNBQVMsU0FBUyxDQUFDLFNBQWlCO0lBQ2xDLElBQUksQ0FBQyxTQUFTLElBQUksU0FBUyxDQUFDLElBQUksRUFBRSxLQUFLLEVBQUU7UUFBRSxPQUFPLEVBQUU7SUFDcEQsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBQyxlQUFlO0lBQy9ELE9BQU8sU0FBUyxHQUFHLE1BQU07QUFDM0IsQ0FBQztBQUVELFNBQVMsY0FBYyxDQUFDLEtBQWEsRUFBRSxjQUFzQjtJQUMzRCxNQUFNLEdBQUcsR0FBRyx3REFBaUIsQ0FBQyxXQUFXLEVBQUU7SUFDM0MsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQW1DO0lBQ3JFLElBQUksQ0FBQyxFQUFFO1FBQUUsT0FBTTtJQUNmLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFFLGNBQWMsQ0FBQztBQUNqRCxDQUFDO0FBRUQsU0FBUyx1QkFBdUIsQ0FBQyxRQUFnQjs7SUFDL0MsTUFBTSxLQUFLLEdBQUcsc0RBQVcsRUFBRTtJQUMzQixNQUFNLE9BQU8sR0FBRyxrQkFBQyxLQUFLLENBQUMsUUFBUSxFQUFVLDBDQUFFLFNBQVMsMENBQUUsT0FBTyxtQ0FBSSxFQUFFO0lBQ25FLE1BQU0sQ0FBQyxHQUFHLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRyxRQUFRLENBQUM7SUFDN0IsSUFBSSxDQUFDLEVBQUMsYUFBRCxDQUFDLHVCQUFELENBQUMsQ0FBRSxNQUFNO1FBQUUsT0FBTTtJQUN0QixNQUFNLE1BQU0sR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUVsQyxNQUFNLEtBQUssR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE1BQU0sYUFBTixNQUFNLHVCQUFOLE1BQU0sQ0FBRSxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRTtJQUMxRSxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBTyxFQUFFLEVBQUU7O1FBQ3hCLE1BQU0sS0FBSyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBRSxhQUFGLEVBQUUsdUJBQUYsRUFBRSxDQUFFLFVBQVUsMENBQUUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQzdFLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFNLEVBQUUsRUFBRTtZQUN2QixJQUFJLENBQUMsYUFBRCxDQUFDLHVCQUFELENBQUMsQ0FBRSxZQUFZO2dCQUFFLENBQUMsQ0FBQyxZQUFZLENBQUMsS0FBSyxHQUFHLEVBQUU7UUFDaEQsQ0FBQyxDQUFDO1FBQ0YsSUFBSSxFQUFFLGFBQUYsRUFBRSx1QkFBRixFQUFFLENBQUUsVUFBVSxFQUFFLENBQUM7WUFDbkIsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEdBQUcsRUFBRTtZQUN0QixFQUFFLENBQUMsVUFBVSxDQUFDLFVBQVUsR0FBRyxFQUFFO1FBQy9CLENBQUM7SUFDSCxDQUFDLENBQUM7SUFFRiwrREFBK0Q7SUFDL0QsS0FBSyxDQUFDLFFBQVEsQ0FBQyxpREFBVSxDQUFDLGtCQUFrQixDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUNqRSxDQUFDO0FBRWMsU0FBUyxNQUFNLENBQUUsS0FBMEI7SUFDeEQsTUFBTSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsR0FBRywrQ0FBUSxDQUFDLEtBQUssQ0FBQztJQUNuRCxNQUFNLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxHQUFHLCtDQUFRLENBQUMsS0FBSyxDQUFDO0lBRXJELE1BQU0sc0JBQXNCLEdBQUcsR0FBRyxFQUFFOztRQUNsQyx3Q0FBd0M7UUFDeEMsTUFBTSxZQUFZLEdBQUcsZ0JBQWdCLEVBQUU7UUFDdkMsTUFBTSxJQUFJLEdBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQztRQUNyQyxNQUFNLFdBQVcsR0FBRyxVQUFVLENBQUMsSUFBSSxDQUFDO1FBQ3BDLE1BQU0sTUFBTSxHQUFHLFNBQVMsQ0FBQyxXQUFXLENBQUM7UUFFckMsa0VBQWtFO1FBQ2xFLE1BQU0sS0FBSyxHQUFHLHNEQUFXLEVBQUU7UUFDM0IsTUFBTSxPQUFPLEdBQUcsa0JBQUMsS0FBSyxDQUFDLFFBQVEsRUFBVSwwQ0FBRSxTQUFTLDBDQUFFLE9BQU8sbUNBQUksRUFBRTtRQUNuRSxNQUFNLENBQUMsTUFBTSxDQUFNLE9BQU8sQ0FBQzthQUN4QixNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFDLGFBQUQsQ0FBQyx1QkFBRCxDQUFDLENBQUUsR0FBRyxNQUFLLHdCQUF3QixDQUFDO2FBQ2hELE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTs7WUFDWCxJQUFJLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO2dCQUFFLE9BQU07WUFDOUMsTUFBTSxLQUFLLEdBQVcsQ0FBQyxPQUFDLENBQUMsS0FBSyxtQ0FBSSxFQUFFLENBQUMsQ0FBQyxRQUFRLEVBQUU7WUFDaEQsTUFBTSxVQUFVLEdBQUcsMkJBQTJCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztZQUMzRyxNQUFNLFFBQVEsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQUMsYUFBRCxDQUFDLHVCQUFELENBQUMsQ0FBRSxNQUFNLDBDQUFFLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sR0FBRyxDQUFDO1lBQ3pGLElBQUksQ0FBQyxRQUFRLElBQUksVUFBVTtnQkFBRSxPQUFNO1lBQ25DLHVCQUF1QixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDL0IsQ0FBQyxDQUFDO1FBRUosNkVBQTZFO1FBQzdFLGNBQWMsQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLEVBQUUsQ0FBQztJQUNsQyxDQUFDO0lBRUQsTUFBTSxXQUFXLEdBQUcsZ0JBQ2xCLFlBQVksRUFBRSxLQUFLLEVBQ25CLEtBQUssRUFBRSxNQUFNLEVBQ2IsTUFBTSxFQUFFLE1BQU0sRUFDZCxRQUFRLEVBQUUsT0FBTyxFQUNqQixTQUFTLEVBQUUsT0FBTyxFQUNsQixlQUFlLEVBQUUsYUFBYSxFQUM5QixLQUFLLEVBQUUsT0FBTyxFQUNkLE1BQU0sRUFBRSxNQUFNLEVBQ2QsU0FBUyxFQUFFLE1BQU0sRUFDakIsT0FBTyxFQUFFLE1BQU0sRUFDZixVQUFVLEVBQUUsUUFBUSxFQUNwQixjQUFjLEVBQUUsUUFBUSxFQUN4QixPQUFPLEVBQUUsTUFBTSxFQUNmLFdBQVcsRUFBRSxNQUFNLElBQ2hCLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxFQUFFLGVBQWUsRUFBRSxvQkFBb0IsRUFBRSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FDeEQ7SUFFVixPQUFPLENBQ0wsb0VBQUssWUFBWSxFQUFFLEdBQUcsRUFBRSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsRUFBRSxZQUFZLEVBQUUsR0FBRyxFQUFFLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQztRQUN0RiwyREFBQyw0Q0FBTyxJQUNOLEtBQUssRUFBQyxpREFBNEMsRUFDbEQsU0FBUyxFQUFDLEtBQUssRUFDZixTQUFTLFFBQ1QsSUFBSSxFQUFFLFdBQVcsRUFDakIsS0FBSyxFQUFFLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRTtZQUUxRiwyREFBQywyQ0FBTSxJQUNMLElBQUksRUFBQyxTQUFTLEVBQ2QsT0FBTyxFQUFFLHNCQUFzQixnQkFDcEIsa0JBQWtCLEVBQzdCLEtBQUssRUFBRSxXQUFXLEVBQ2xCLFlBQVksRUFBRSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLEVBQ3ZDLFlBQVksRUFBRSxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDO2dCQUV4QywyREFBQyx5Q0FBSSxJQUNILElBQUksRUFBRSwrRUFBa0IsRUFDeEIsSUFBSSxFQUFDLEdBQUcsRUFDUixLQUFLLEVBQUUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxHQUMxRCxDQUNLLENBQ0QsQ0FDTixDQUNQO0FBQ0gsQ0FBQztBQUVPLFNBQVMsMkJBQTJCLENBQUMsR0FBRyxJQUFJLHFCQUF1QixHQUFHLEdBQUcsRUFBQyxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL3lvdXItZXh0ZW5zaW9ucy93aWRnZXRzL1JlZnJlc2NhclBhZ2luYS9hc3NldHMvYWN0dWFsaXphci5zdmciLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC9leHRlcm5hbCBzeXN0ZW0gXCJqaW11LWNvcmVcIiIsIndlYnBhY2s6Ly9leGItY2xpZW50L2V4dGVybmFsIHN5c3RlbSBcImppbXUtY29yZS9yZWFjdFwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvZXh0ZXJuYWwgc3lzdGVtIFwiamltdS11aVwiIiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9leGItY2xpZW50L3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL2V4Yi1jbGllbnQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vZXhiLWNsaWVudC8uL2ppbXUtY29yZS9saWIvc2V0LXB1YmxpYy1wYXRoLnRzIiwid2VicGFjazovL2V4Yi1jbGllbnQvLi95b3VyLWV4dGVuc2lvbnMvd2lkZ2V0cy9SZWZyZXNjYXJQYWdpbmEvc3JjL3J1bnRpbWUvd2lkZ2V0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUEvUGp4emRtY2daVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdOVEV5SURVeE1pSWdhR1ZwWjJoMFBTSTFNVEp3ZUNJZ2FXUTlJa3hoZVdWeVh6RWlJSFpsY25OcGIyNDlJakV1TVNJZ2RtbGxkMEp2ZUQwaU1DQXdJRFV4TWlBMU1USWlJSGRwWkhSb1BTSTFNVEp3ZUNJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklpQjRiV3h1Y3pwNGJHbHVhejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TVRrNU9TOTRiR2x1YXlJK1BHYytQSEJoZEdnZ1pEMGlJQ0FnVFRNeU1Dd3lNakpzTkRJc01UTmpMVGt1T0MwME9TNDJMVFV6TGpVdE9EY3RNVEEyTFRnM2N5MDVOaTR5TERNM0xqUXRNVEEyTERnM0lpQm1hV3hzUFNKdWIyNWxJaUJ6ZEhKdmEyVTlJaU13TURBd01EQWlJSE4wY205clpTMXNhVzVsWTJGd1BTSnliM1Z1WkNJZ2MzUnliMnRsTFd4cGJtVnFiMmx1UFNKeWIzVnVaQ0lnYzNSeWIydGxMVzFwZEdWeWJHbHRhWFE5SWpFd0lpQnpkSEp2YTJVdGQybGtkR2c5SWpFd0lpOCtQR3hwYm1VZ1ptbHNiRDBpYm05dVpTSWdjM1J5YjJ0bFBTSWpNREF3TURBd0lpQnpkSEp2YTJVdGJHbHVaV05oY0QwaWNtOTFibVFpSUhOMGNtOXJaUzFzYVc1bGFtOXBiajBpY205MWJtUWlJSE4wY205clpTMXRhWFJsY214cGJXbDBQU0l4TUNJZ2MzUnliMnRsTFhkcFpIUm9QU0l4TUNJZ2VERTlJak00TVNJZ2VESTlJak0yTWlJZ2VURTlJakU1TVM0MUlpQjVNajBpTWpNMUlpOCtQSEJoZEdnZ1pEMGlJQ0FnVFRFNU1pd3lPVEJzTFRReUxURXpZemt1T0N3ME9TNDJMRFV6TGpVc09EY3NNVEEyTERnM2N6azJMakl0TXpjdU5Dd3hNRFl0T0RjaUlHWnBiR3c5SW01dmJtVWlJSE4wY205clpUMGlJekF3TURBd01DSWdjM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWlCemRISnZhMlV0YkdsdVpXcHZhVzQ5SW5KdmRXNWtJaUJ6ZEhKdmEyVXRiV2wwWlhKc2FXMXBkRDBpTVRBaUlITjBjbTlyWlMxM2FXUjBhRDBpTVRBaUx6NDhiR2x1WlNCbWFXeHNQU0p1YjI1bElpQnpkSEp2YTJVOUlpTXdNREF3TURBaUlITjBjbTlyWlMxc2FXNWxZMkZ3UFNKeWIzVnVaQ0lnYzNSeWIydGxMV3hwYm1WcWIybHVQU0p5YjNWdVpDSWdjM1J5YjJ0bExXMXBkR1Z5YkdsdGFYUTlJakV3SWlCemRISnZhMlV0ZDJsa2RHZzlJakV3SWlCNE1UMGlNVE14SWlCNE1qMGlNVFV3SWlCNU1UMGlNekl3TGpVaUlIa3lQU0l5TnpjaUx6NDhMMmMrUEM5emRtYytcIiIsIm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9qaW11X2NvcmVfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfcmVhY3RfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfamltdV91aV9fOyIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxyXG4gKiBXZWJwYWNrIHdpbGwgcmVwbGFjZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB3aXRoIF9fd2VicGFja19yZXF1aXJlX18ucCB0byBzZXQgdGhlIHB1YmxpYyBwYXRoIGR5bmFtaWNhbGx5LlxyXG4gKiBUaGUgcmVhc29uIHdoeSB3ZSBjYW4ndCBzZXQgdGhlIHB1YmxpY1BhdGggaW4gd2VicGFjayBjb25maWcgaXM6IHdlIGNoYW5nZSB0aGUgcHVibGljUGF0aCB3aGVuIGRvd25sb2FkLlxyXG4gKiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuLy8gQHRzLWlnbm9yZVxyXG5fX3dlYnBhY2tfcHVibGljX3BhdGhfXyA9IHdpbmRvdy5qaW11Q29uZmlnLmJhc2VVcmxcclxuIiwiLy8gd2lkZ2V0cy9SZWZyZXNjYXJQYWdpbmEvc3JjL3J1bnRpbWUvd2lkZ2V0LnRzeFxyXG5pbXBvcnQgeyBSZWFjdCwgQWxsV2lkZ2V0UHJvcHMsIGpzeCwgZ2V0QXBwU3RvcmUsIGFwcEFjdGlvbnMsIERhdGFTb3VyY2VNYW5hZ2VyLCB0eXBlIFF1ZXJpYWJsZURhdGFTb3VyY2UgfSBmcm9tICdqaW11LWNvcmUnXHJcbmltcG9ydCB7IEJ1dHRvbiwgSWNvbiwgVG9vbHRpcCB9IGZyb20gJ2ppbXUtdWknXHJcbmltcG9ydCB7IHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXHJcbmltcG9ydCBNeUxvY2FsUmVmcmVzaEljb24gZnJvbSAnLi4vLi4vLi4vUmVmcmVzY2FyUGFnaW5hL2Fzc2V0cy9hY3R1YWxpemFyLnN2ZydcclxuXHJcbi8qKiBNYW50ZW5lciBlc3RvcyBmaWx0cm9zICovXHJcbmNvbnN0IFdJREdFVFNfQV9DT05TRVJWQVIgPSBbJ3dpZGdldF8xNycsICd3aWRnZXRfMTgnLCAnd2lkZ2V0XzE5J10gYXMgY29uc3RcclxuLyoqIERhdGFTb3VyY2UgcHJpbmNpcGFsICovXHJcbmNvbnN0IERTX0lEID0gJ2RhdGFTb3VyY2VfMS1BY2NpZGVudGVzU2V5c18xNzA5XzUyMTEnXHJcbi8qKiBJbmNsdWlyIENhcnJldGVyYSBlbiBlbCBXSEVSRSBkZWwgRFMgKHNpIGxvIGRlc2FjdGl2YXMsIGVsIGNvbWJvIGRlIENhcnJldGVyYSBsaXN0YXLDoSB0b2RhcykgKi9cclxuY29uc3QgSU5DTFVERV9DQVJSRVRFUkFfSU5fRFMgPSB0cnVlXHJcbi8qKiBObyDigJxsaW1waWFy4oCdIGVzdG9zIGZpbHRyb3MgYXV4aWxpYXJlcyBwb3IgZXRpcXVldGEgKi9cclxuY29uc3QgRVRJUVVFVEFTX0ZJTFRST1NfQV9JR05PUkFSID0gWydGaWx0cm9zIGNydXphZG9zJywgJ0ZpbHRyb3MgYWN0aXZvcyddXHJcblxyXG50eXBlIFNhdmVkRmlsdGVycyA9IHtcclxuICBjYXJyZXRlcmE/OiBzdHJpbmdcclxuICBwaz86IHsgbWluOiBudW1iZXI7IG1heDogbnVtYmVyIH1cclxuICBhbmlvPzogeyBtaW46IG51bWJlcjsgbWF4OiBudW1iZXIgfVxyXG59XHJcblxyXG5jb25zdCBkZWVwQ2xvbmUgPSA8VCw+KG86IFQpOiBUID0+IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobykpXHJcblxyXG5mdW5jdGlvbiByZWFkQ3VycmVudFdoZXJlKCk6IHN0cmluZyB7XHJcbiAgY29uc3QgcyA9IGdldEFwcFN0b3JlKCkuZ2V0U3RhdGUoKSBhcyBhbnlcclxuICByZXR1cm4gcz8uZGF0YVNvdXJjZXNJbmZvPy5bRFNfSURdPy5xdWVyeVBhcmFtcz8ud2hlcmUgPz8gJydcclxufVxyXG5cclxuZnVuY3Rpb24gcGFyc2VXaGVyZSh3aGVyZTogc3RyaW5nKTogU2F2ZWRGaWx0ZXJzIHtcclxuICBjb25zdCBvdXQ6IFNhdmVkRmlsdGVycyA9IHt9XHJcbiAgaWYgKCF3aGVyZSkgcmV0dXJuIG91dFxyXG4gIGNvbnN0IG1DYXIgPSB3aGVyZS5tYXRjaCgvQ2FycmV0ZXJhXFxzKj1cXHMqJyhbXiddKyknL2kpXHJcbiAgaWYgKG1DYXIpIG91dC5jYXJyZXRlcmEgPSBtQ2FyWzFdXHJcbiAgY29uc3QgbVBLID0gd2hlcmUubWF0Y2goL1BLXFxzK0JFVFdFRU5cXHMrKC0/XFxkKyg/OlxcLlxcZCspPylcXHMrQU5EXFxzKygtP1xcZCsoPzpcXC5cXGQrKT8pL2kpXHJcbiAgaWYgKG1QSykgb3V0LnBrID0geyBtaW46IE51bWJlcihtUEtbMV0pLCBtYXg6IE51bWJlcihtUEtbMl0pIH1cclxuICBjb25zdCBtQW4gPSB3aGVyZS5tYXRjaCgvQcOxb1xccytCRVRXRUVOXFxzKygtP1xcZCspXFxzK0FORFxccysoLT9cXGQrKS9pKVxyXG4gIGlmIChtQW4pIG91dC5hbmlvID0geyBtaW46IE51bWJlcihtQW5bMV0pLCBtYXg6IE51bWJlcihtQW5bMl0pIH1cclxuICByZXR1cm4gb3V0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJ1aWxkV2hlcmUoZjogU2F2ZWRGaWx0ZXJzKTogc3RyaW5nIHtcclxuICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXVxyXG4gIGlmIChmLmNhcnJldGVyYSAmJiBJTkNMVURFX0NBUlJFVEVSQV9JTl9EUykgcGFydHMucHVzaChgKENhcnJldGVyYSA9ICcke2YuY2FycmV0ZXJhLnJlcGxhY2UoLycvZywgXCInJ1wiKX0nKWApXHJcbiAgaWYgKGYucGspIHBhcnRzLnB1c2goYCgoUEsgQkVUV0VFTiAke2YucGsubWlufSBBTkQgJHtmLnBrLm1heH0pKWApXHJcbiAgaWYgKGYuYW5pbykgcGFydHMucHVzaChgKChBw7FvIEJFVFdFRU4gJHtmLmFuaW8ubWlufSBBTkQgJHtmLmFuaW8ubWF4fSkpYClcclxuICByZXR1cm4gcGFydHMuam9pbignIEFORCAnKVxyXG59XHJcblxyXG4vKiogRnVlcnphIGNhbWJpbyBkZSBjYWRlbmEgc2luIHRvY2FyIHNlbcOhbnRpY2EgKGVzcGFjaW9zIGFsIGZpbmFsKS4gTmFkYSBkZSBjb21lbnRhcmlvcyBuaSAxPTEuICovXHJcbmZ1bmN0aW9uIGJ1bXBXaGVyZShiYXNlV2hlcmU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgaWYgKCFiYXNlV2hlcmUgfHwgYmFzZVdoZXJlLnRyaW0oKSA9PT0gJycpIHJldHVybiAnJ1xyXG4gIGNvbnN0IHNwYWNlcyA9ICcgJy5yZXBlYXQoKERhdGUubm93KCkgJSA1KSArIDEpIC8vIDHigJM1IGVzcGFjaW9zXHJcbiAgcmV0dXJuIGJhc2VXaGVyZSArIHNwYWNlc1xyXG59XHJcblxyXG5mdW5jdGlvbiBhcHBseVdoZXJlVG9EUyh3aGVyZTogc3RyaW5nLCBzb3VyY2VXaWRnZXRJZDogc3RyaW5nKSB7XHJcbiAgY29uc3QgZHNtID0gRGF0YVNvdXJjZU1hbmFnZXIuZ2V0SW5zdGFuY2UoKVxyXG4gIGNvbnN0IGRzID0gZHNtLmdldERhdGFTb3VyY2UoRFNfSUQpIGFzIHVua25vd24gYXMgUXVlcmlhYmxlRGF0YVNvdXJjZVxyXG4gIGlmICghZHMpIHJldHVyblxyXG4gIGRzLnVwZGF0ZVF1ZXJ5UGFyYW1zKHsgd2hlcmUgfSwgc291cmNlV2lkZ2V0SWQpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsZWFyRmlsdGVyQ29uZmlnQnlKc29uKHdpZGdldElkOiBzdHJpbmcpIHtcclxuICBjb25zdCBzdG9yZSA9IGdldEFwcFN0b3JlKClcclxuICBjb25zdCB3aWRnZXRzID0gKHN0b3JlLmdldFN0YXRlKCkgYXMgYW55KT8uYXBwQ29uZmlnPy53aWRnZXRzID8/IHt9XHJcbiAgY29uc3QgdyA9IHdpZGdldHM/Llt3aWRnZXRJZF1cclxuICBpZiAoIXc/LmNvbmZpZykgcmV0dXJuXHJcbiAgY29uc3QgbmV3Q2ZnID0gZGVlcENsb25lKHcuY29uZmlnKVxyXG5cclxuICBjb25zdCBpdGVtcyA9IEFycmF5LmlzQXJyYXkobmV3Q2ZnPy5maWx0ZXJJdGVtcykgPyBuZXdDZmcuZmlsdGVySXRlbXMgOiBbXVxyXG4gIGl0ZW1zLmZvckVhY2goKGl0OiBhbnkpID0+IHtcclxuICAgIGNvbnN0IHBhcnRzID0gQXJyYXkuaXNBcnJheShpdD8uc3FsRXhwck9iaj8ucGFydHMpID8gaXQuc3FsRXhwck9iai5wYXJ0cyA6IFtdXHJcbiAgICBwYXJ0cy5mb3JFYWNoKChwOiBhbnkpID0+IHtcclxuICAgICAgaWYgKHA/LnZhbHVlT3B0aW9ucykgcC52YWx1ZU9wdGlvbnMudmFsdWUgPSBbXVxyXG4gICAgfSlcclxuICAgIGlmIChpdD8uc3FsRXhwck9iaikge1xyXG4gICAgICBpdC5zcWxFeHByT2JqLnNxbCA9ICcnXHJcbiAgICAgIGl0LnNxbEV4cHJPYmouZGlzcGxheVNRTCA9ICcnXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gdjEuMTQ6IHVzYXIgd2lkZ2V0Q29uZmlnTG9hZGVkOyBOTyBleGlzdGUgd2lkZ2V0Q29uZmlnQ2hhbmdlXHJcbiAgc3RvcmUuZGlzcGF0Y2goYXBwQWN0aW9ucy53aWRnZXRDb25maWdMb2FkZWQod2lkZ2V0SWQsIG5ld0NmZykpXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdpZGdldCAocHJvcHM6IEFsbFdpZGdldFByb3BzPGFueT4pIHtcclxuICBjb25zdCBbaXNIb3ZlcmluZywgc2V0SXNIb3ZlcmluZ10gPSB1c2VTdGF0ZShmYWxzZSlcclxuICBjb25zdCBbc2hvd1Rvb2x0aXAsIHNldFNob3dUb29sdGlwXSA9IHVzZVN0YXRlKGZhbHNlKVxyXG5cclxuICBjb25zdCBzb2Z0UmVzZXRFeGNlcHRLZWVwZXJzID0gKCkgPT4ge1xyXG4gICAgLy8gMSkgTGVlciBsbyBxdWUgaGF5IHJlYWxtZW50ZSBhcGxpY2Fkb1xyXG4gICAgY29uc3QgY3VycmVudFdoZXJlID0gcmVhZEN1cnJlbnRXaGVyZSgpXHJcbiAgICBjb25zdCBrZWVwID0gcGFyc2VXaGVyZShjdXJyZW50V2hlcmUpXHJcbiAgICBjb25zdCBrZWVwZXJXaGVyZSA9IGJ1aWxkV2hlcmUoa2VlcClcclxuICAgIGNvbnN0IGJ1bXBlZCA9IGJ1bXBXaGVyZShrZWVwZXJXaGVyZSlcclxuXHJcbiAgICAvLyAyKSBMaW1waWFyIHRvZG9zIGxvcyBGaWx0ZXIgZXhjZXB0byAxNy8xOC8xOSB5IGxvcyDigJxlc3BlY2lhbGVz4oCdXHJcbiAgICBjb25zdCBzdG9yZSA9IGdldEFwcFN0b3JlKClcclxuICAgIGNvbnN0IHdpZGdldHMgPSAoc3RvcmUuZ2V0U3RhdGUoKSBhcyBhbnkpPy5hcHBDb25maWc/LndpZGdldHMgPz8ge31cclxuICAgIE9iamVjdC52YWx1ZXM8YW55Pih3aWRnZXRzKVxyXG4gICAgICAuZmlsdGVyKHcgPT4gdz8udXJpID09PSAnd2lkZ2V0cy9jb21tb24vZmlsdGVyLycpXHJcbiAgICAgIC5mb3JFYWNoKHcgPT4ge1xyXG4gICAgICAgIGlmIChXSURHRVRTX0FfQ09OU0VSVkFSLmluY2x1ZGVzKHcuaWQpKSByZXR1cm5cclxuICAgICAgICBjb25zdCBsYWJlbDogc3RyaW5nID0gKHcubGFiZWwgPz8gJycpLnRvU3RyaW5nKClcclxuICAgICAgICBjb25zdCBpc0VzcGVjaWFsID0gRVRJUVVFVEFTX0ZJTFRST1NfQV9JR05PUkFSLnNvbWUodHh0ID0+IGxhYmVsLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModHh0LnRvTG93ZXJDYXNlKCkpKVxyXG4gICAgICAgIGNvbnN0IGhhc0l0ZW1zID0gQXJyYXkuaXNBcnJheSh3Py5jb25maWc/LmZpbHRlckl0ZW1zKSAmJiB3LmNvbmZpZy5maWx0ZXJJdGVtcy5sZW5ndGggPiAwXHJcbiAgICAgICAgaWYgKCFoYXNJdGVtcyB8fCBpc0VzcGVjaWFsKSByZXR1cm5cclxuICAgICAgICBjbGVhckZpbHRlckNvbmZpZ0J5SnNvbih3LmlkKVxyXG4gICAgICB9KVxyXG5cclxuICAgIC8vIDMpIEFwbGljYXIgZGlyZWN0YW1lbnRlIGVsIFdIRVJFIChjb24g4oCcYnVtcOKAnSBwYXJhIHF1ZSBzaWVtcHJlIHNlIHByb3BhZ3VlKVxyXG4gICAgYXBwbHlXaGVyZVRvRFMoYnVtcGVkLCBwcm9wcy5pZClcclxuICB9XHJcblxyXG4gIGNvbnN0IGJ1dHRvblN0eWxlID0ge1xyXG4gICAgYm9yZGVyUmFkaXVzOiAnNTAlJyxcclxuICAgIHdpZHRoOiAnNDBweCcsXHJcbiAgICBoZWlnaHQ6ICc0MHB4JyxcclxuICAgIG1pbldpZHRoOiAndW5zZXQnLFxyXG4gICAgbWluSGVpZ2h0OiAndW5zZXQnLFxyXG4gICAgYmFja2dyb3VuZENvbG9yOiAndHJhbnNwYXJlbnQnLFxyXG4gICAgY29sb3I6ICdibGFjaycsXHJcbiAgICBib3JkZXI6ICdub25lJyxcclxuICAgIGJveFNoYWRvdzogJ25vbmUnLFxyXG4gICAgZGlzcGxheTogJ2ZsZXgnLFxyXG4gICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXHJcbiAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXHJcbiAgICBvdXRsaW5lOiAnbm9uZScsXHJcbiAgICBwYWRkaW5nTGVmdDogJzI1cHgnLFxyXG4gICAgLi4uKGlzSG92ZXJpbmcgPyB7IGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwgMCwgMCwgMC4xKScgfSA6IHt9KSxcclxuICB9IGFzIGNvbnN0XHJcblxyXG4gIHJldHVybiAoXHJcbiAgICA8ZGl2IG9uTW91c2VFbnRlcj17KCkgPT4gc2V0U2hvd1Rvb2x0aXAodHJ1ZSl9IG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0U2hvd1Rvb2x0aXAoZmFsc2UpfT5cclxuICAgICAgPFRvb2x0aXBcclxuICAgICAgICB0aXRsZT1cIkVsaW1pbmFyIGZpbHRyb3Mgc2Fsdm8gQ2FycmV0ZXJhLCBQSyB5IEHDsW9cIlxyXG4gICAgICAgIHBsYWNlbWVudD1cInRvcFwiXHJcbiAgICAgICAgc2hvd0Fycm93XHJcbiAgICAgICAgb3Blbj17c2hvd1Rvb2x0aXB9XHJcbiAgICAgICAgc3R5bGU9e3sgYmFja2dyb3VuZENvbG9yOiAnIzMzMycsIGNvbG9yOiAnI2ZmZicsIGZvbnRTaXplOiAnMC45cmVtJywgYm9yZGVyUmFkaXVzOiAnNnB4JyB9fVxyXG4gICAgICA+XHJcbiAgICAgICAgPEJ1dHRvblxyXG4gICAgICAgICAgdHlwZT1cInByaW1hcnlcIlxyXG4gICAgICAgICAgb25DbGljaz17c29mdFJlc2V0RXhjZXB0S2VlcGVyc31cclxuICAgICAgICAgIGFyaWEtbGFiZWw9XCJFbGltaW5hciBmaWx0cm9zXCJcclxuICAgICAgICAgIHN0eWxlPXtidXR0b25TdHlsZX1cclxuICAgICAgICAgIG9uTW91c2VFbnRlcj17KCkgPT4gc2V0SXNIb3ZlcmluZyh0cnVlKX1cclxuICAgICAgICAgIG9uTW91c2VMZWF2ZT17KCkgPT4gc2V0SXNIb3ZlcmluZyhmYWxzZSl9XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAgPEljb25cclxuICAgICAgICAgICAgaWNvbj17TXlMb2NhbFJlZnJlc2hJY29ufVxyXG4gICAgICAgICAgICBzaXplPVwibVwiXHJcbiAgICAgICAgICAgIHN0eWxlPXt7IGRpc3BsYXk6ICdibG9jaycsIHdpZHRoOiAnNDBweCcsIGhlaWdodDogJzQwcHgnIH19XHJcbiAgICAgICAgICAvPlxyXG4gICAgICAgIDwvQnV0dG9uPlxyXG4gICAgICA8L1Rvb2x0aXA+XHJcbiAgICA8L2Rpdj5cclxuICApXHJcbn1cclxuXG4gZXhwb3J0IGZ1bmN0aW9uIF9fc2V0X3dlYnBhY2tfcHVibGljX3BhdGhfXyh1cmwpIHsgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gPSB1cmwgfSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==