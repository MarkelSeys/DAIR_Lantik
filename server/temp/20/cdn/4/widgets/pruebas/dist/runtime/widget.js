/*! For license information please see widget.js.LICENSE.txt */
System.register(["jimu-core","jimu-core/react","jimu-core/react-dom","jimu-arcgis","jimu-ui/advanced/setting-components","esri/renderers/UniqueValueRenderer","esri/smartMapping/renderers/pieChart","jimu-ui"],(function(e,t){var o={},i={},r={},n={},l={},a={},s={},c={};return Object.defineProperty(i,"__esModule",{value:!0}),{setters:[function(e){o.Immutable=e.Immutable,o.JimuFieldType=e.JimuFieldType,o.React=e.React,o.appActions=e.appActions,o.getAppStore=e.getAppStore},function(e){Object.keys(e).forEach((function(t){i[t]=e[t]}))},function(e){r.unstable_batchedUpdates=e.unstable_batchedUpdates},function(e){n.JimuMapViewComponent=e.JimuMapViewComponent},function(e){l.SettingSection=e.SettingSection},function(e){a.default=e.default},function(e){s.createRendererForClustering=e.createRendererForClustering},function(e){c.Button=e.Button,c.Loading=e.Loading,c.MultiSelect=e.MultiSelect,c.Select=e.Select,c.Switch=e.Switch}],execute:function(){e((()=>{var e={8679:(e,t,o)=>{"use strict";var i=o(9864),r={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function s(e){return i.isMemo(e)?l:a[e.$$typeof]||r}a[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[i.Memo]=l;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,o,i){if("string"!=typeof o){if(m){var r=f(o);r&&r!==m&&e(t,r,i)}var l=u(o);d&&(l=l.concat(d(o)));for(var a=s(t),S=s(o),y=0;y<l.length;++y){var g=l[y];if(!(n[g]||i&&i[g]||S&&S[g]||a&&a[g])){var h=p(o,g);try{c(t,g,h)}catch(e){}}}}return t}},9921:(e,t)=>{"use strict";var o="function"==typeof Symbol&&Symbol.for,i=o?Symbol.for("react.element"):60103,r=o?Symbol.for("react.portal"):60106,n=o?Symbol.for("react.fragment"):60107,l=o?Symbol.for("react.strict_mode"):60108,a=o?Symbol.for("react.profiler"):60114,s=o?Symbol.for("react.provider"):60109,c=o?Symbol.for("react.context"):60110,u=o?Symbol.for("react.async_mode"):60111,d=o?Symbol.for("react.concurrent_mode"):60111,p=o?Symbol.for("react.forward_ref"):60112,f=o?Symbol.for("react.suspense"):60113,m=o?Symbol.for("react.suspense_list"):60120,S=o?Symbol.for("react.memo"):60115,y=o?Symbol.for("react.lazy"):60116,g=o?Symbol.for("react.block"):60121,h=o?Symbol.for("react.fundamental"):60117,b=o?Symbol.for("react.responder"):60118,v=o?Symbol.for("react.scope"):60119;function w(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case u:case d:case n:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case y:case S:case s:return e;default:return t}}case r:return t}}}function x(e){return w(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=s,t.Element=i,t.ForwardRef=p,t.Fragment=n,t.Lazy=y,t.Memo=S,t.Portal=r,t.Profiler=a,t.StrictMode=l,t.Suspense=f,t.isAsyncMode=function(e){return x(e)||w(e)===u},t.isConcurrentMode=x,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return w(e)===p},t.isFragment=function(e){return w(e)===n},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===S},t.isPortal=function(e){return w(e)===r},t.isProfiler=function(e){return w(e)===a},t.isStrictMode=function(e){return w(e)===l},t.isSuspense=function(e){return w(e)===f},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===n||e===d||e===a||e===l||e===f||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===S||e.$$typeof===s||e.$$typeof===c||e.$$typeof===p||e.$$typeof===h||e.$$typeof===b||e.$$typeof===v||e.$$typeof===g)},t.typeOf=w},9864:(e,t,o)=>{"use strict";e.exports=o(9921)},8359:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},2973:(e,t,o)=>{"use strict";o(8359)},8845:(e,t,o)=>{"use strict";o.d(t,{default:()=>p});var i=o(8891);const r={_widgetLabel:"Leyenda dinámica",chooseAttribute:"Simbolización"};var n=o(6826),l=o(1315),a=o(7756),s=o(6849),c=o(2618),u=o(726),d=function(e,t,o,i){return new(o||(o=Promise))((function(r,n){function l(e){try{s(i.next(e))}catch(e){n(e)}}function a(e){try{s(i.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,a)}s((i=i.apply(e,t||[])).next())}))};function p(e){var t;(0,i.Immutable)([i.JimuFieldType.String]);const[o,p]=(0,l.useState)(""),[f,m]=(0,l.useState)(),[S,y]=(0,l.useState)(""),[g,h]=(0,l.useState)((0,i.Immutable)([])),[b,v]=(0,l.useState)([]),[w,x]=(0,l.useState)(!1),[A,_]=(0,l.useState)(!0),[T,F]=(0,l.useState)([]);(0,l.useEffect)((()=>{if(e.useDataSources&&e.useDataSources.length>0){const t=e.useDataSources[0].dataSourceId.split("-")[1];y(t)}}),[e.useDataSources]);const C={Tipo_accidente:"Tipo de accidente",Subtipo_Accidente:"Subtipo de Accidente",Sentido:"Sentido",Superficie:"Superficie",Luminosidad:"Luminosidad",Factores_atmosfericos:"Factores atmosféricos",Tipo_dia:"Tipo de día",Factor_concurrente_1:"Factor concurrente"};function L(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}function D(e){return l.default.createElement(a.SettingSection,{className:"attribute-selector-section",title:"Seleccione los atributos que no se quieran resumir"},l.default.createElement(u.MultiSelect,{items:e,placeholder:"Selecione 9 atributos únicos",displayByValues:function(e){return`${e.length} seleccionados`},onClickItem:function(e,t,o){o.length<=9&&v(o)}}))}const O=(e,t)=>d(this,void 0,void 0,(function*(){const{renderer:i,fields:r}=yield c.createRendererForClustering({layer:e,legendOptions:{title:C[o]}}),n=[];let l;r.forEach((e=>{n.push(e.name.split("_").map((e=>e.replace("SUM",""))).join(" ").replace("SUM","").slice(1,e.name.split("_").map((e=>e.replace("SUM",""))).join(" ").replace("SUM","").length))})),l="Tipo_accidente"===o?{"Salidas de v a":"Salidas de vía",Colisiones:"Colisiones",Alcances:"Alcances",Choques:"Choques",Otros:"Otros","Atropellos de animales":"Atropellos de animales",Caidas:"Caídas",Vuelcos:"Vuelcos","Atropellos de peatones":"Atropellos de peatones","cluster default":"Agrupación","Sin datos":"Sin datos"}:function(e,t){const o={};t=t.map(String);for(const i of e){const r={},n=[];for(const a of t){let s=0;if(i.length===a.length)for(let c=0;c<i.length;c++)i[c]===a[c]&&s++;r[s]=a,n.push(s)}function l(e,t){return t-e}n.sort(l),0===n[0]?o[i]=" "===i?" ":"Agrupación":o[i]=r[n[0]]}return o}(n,t);const a=r.map((e=>({fieldName:e.name,label:l[e.name.split("_").map((e=>e.replace("SUM",""))).join(" ").replace("SUM","").slice(1,e.name.split("_").map((e=>e.replace("SUM",""))).join(" ").replace("SUM","").length)],format:{places:0,digitSeparator:!0}})));t.length<11&&a.pop();const s={title:"Resumen del clúster",content:[{type:"text",text:"This cluster represents <b>{cluster_count}</b> features. "},{type:"media",mediaInfos:[{title:"Reports",type:"pie-chart",value:{fields:a.map((e=>e.fieldName))}}]},{type:"fields"}],fieldInfos:a};i.attributes.map((e=>t.length<11&&e.field.includes("default")?i.attributes.splice(i.attributes.findIndex((function(t){return t.field===e.field})),1):e.label=l[e.field.split("_").map((e=>e.replace("SUM",""))).join(" ").replace("SUM","").slice(1,e.field.split("_").map((e=>e.replace("SUM",""))).join(" ").replace("SUM","").length)])),e.featureReduction={type:"cluster",fields:r,clusterMinSize:16,renderer:i,popupTemplate:s},x(!1)}));return(0,l.useEffect)((()=>{if(f&&o&&""!==S){const t=f.view.map.findLayerById(S),r=t.getField(o),n=t.createQuery();function l(t,o,i){let r={};const n=[];if("Tipo_accidente"===i){const e={"Salidas de vía":[203,0,203],Colisiones:[101,178,255],Alcances:[255,153,50],Choques:[153,255,229],Otros:[0,63,255],"Atropellos de animales":[255,255,50],Caidas:[140,255,101],Vuelcos:[255,0,197],"Atropellos de peatones":[216,255,101],"Sin datos":[182,182,182]};r=e;for(const t in e){const o={value:t,label:t,symbol:{type:"simple-marker",color:e[t],outline:null,size:6}};n.push(o)}}else if("Subtipo_Accidente"===i||"Año"===i||"Factores_atmosfericos"===i||"Superficie"===i){console.log("simbologia"),console.log(t.slice(0,10)),console.log("simbologia");for(const e of t.slice(0,15)){const t=L();r[e]=t;const o={value:e,label:e,symbol:{type:"simple-marker",color:t,outline:null,size:6}};n.push(o)}}else for(const e of t){const t=L();r[e]=t;const o={value:e,label:e,symbol:{type:"simple-marker",color:t,outline:null,size:6}};n.push(o)}const l=new s.default({field:i,defaultSymbol:{type:"simple-marker",color:[195,195,195],outline:null,size:6},uniqueValueInfos:n});e.onAtt(r),o.renderer=l}n.outFields=[r.name],n.maxRecordCountFactor=3,(()=>d(this,void 0,void 0,(function*(){const e=[];(yield t.queryFeatures(n)).features.forEach((t=>{const o=t.attributes[r.name];e.push(o)}));const o=Array.from(new Set(e));if(w){const e=(0,i.getAppStore)().getState().appConfig;if(o)e.attUnique=o;else{const t=["Salidas de vía","Colisiones","Alcances","Choques","Otros","Atropellos de animales","Caídas","Vuelcos","Atropellos de peatones","Sin datos"];e.attUnique=t}}return o})))().then((e=>{const o=[];if(e.forEach((e=>{const t={};null===e?(t.value="Sin datos",t.label="Sin datos"):(t.value=e.toString(),t.label=e.toString()),o.push(t)})),h(o),w){if(b.length<=9&&0!==b.length){for(const t of e){let e=0;for(const o of b)t===o&&e++;if(0===e){b.push(t);break}}l(b.slice(0,-1),t,r.name)}else l(e,t,r.name);F(e),A?O(t,e):t.featureReduction={},x(!1)}}))}v([])}),[f,o,S,w]),(0,l.useEffect)((()=>{if(f&&o&&void 0!==S){const e=f.view.map.findLayerById(S);A?O(e,T):e.featureReduction={},x(!1)}}),[A]),l.default.createElement("div",{className:"widget-setting-get-map-coordinates"},l.default.createElement("div",{className:"widget-starter jimu-widget"},e.useMapWidgetIds&&1===e.useMapWidgetIds.length&&l.default.createElement(n.JimuMapViewComponent,{useMapWidgetId:null===(t=e.useMapWidgetIds)||void 0===t?void 0:t[0],onActiveViewChange:e=>{e&&m(e)}})),e.useDataSources&&e.useDataSources.length>0&&l.default.createElement(a.SettingSection,{className:"attribute-selector-section",title:e.intl.formatMessage({id:"chooseAttributeSelectorLabel",defaultMessage:r.chooseAttribute})},l.default.createElement(u.Select,{value:o,onChange:(t,o)=>{t&&(p(t.target.value),e.onUpdate(t.target.value))},placeholder:"Seleccione un campo...",autoWidth:!0,menuProps:{showArrow:!0}},Object.keys(C).map((e=>l.default.createElement("option",{key:e,value:e},C[e]))))),"Subtipo_Accidente"===o&&D(g),"Año"===o&&D(g),"Superficie"===o&&D(g),"Factores_atmosfericos"===o&&D(g),l.default.createElement(a.SettingSection,{className:"attribute-selector-section"},l.default.createElement(u.Button,{onClick:()=>{x(!0),e.onRun(!0)},size:"sm"},"Ejecutar"),w&&l.default.createElement(u.Loading,{height:200,type:"DONUT",width:200})),l.default.createElement(a.SettingSection,{className:"attribute-selector-section"},l.default.createElement(u.Switch,{style:{paddingTop:"10px"},checked:A,onChange:()=>{_(!A)}}),"   Activa o desactiva el clúster"))}},3250:(e,t,o)=>{"use strict";var i=o(1315),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=i.useState,l=i.useEffect,a=i.useLayoutEffect,s=i.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!r(e,o)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),i=n({inst:{value:o,getSnapshot:t}}),r=i[0].inst,u=i[1];return a((function(){r.value=o,r.getSnapshot=t,c(r)&&u({inst:r})}),[e,o,t]),l((function(){return c(r)&&u({inst:r}),e((function(){c(r)&&u({inst:r})}))}),[e]),s(o),o};t.useSyncExternalStore=void 0!==i.useSyncExternalStore?i.useSyncExternalStore:u},139:(e,t,o)=>{"use strict";var i=o(1315),r=o(1688),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},l=r.useSyncExternalStore,a=i.useRef,s=i.useEffect,c=i.useMemo,u=i.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,o,i,r){var d=a(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=c((function(){function e(e){if(!s){if(s=!0,l=e,e=i(e),void 0!==r&&p.hasValue){var t=p.value;if(r(t,e))return a=t}return a=e}if(t=a,n(l,e))return t;var o=i(e);return void 0!==r&&r(t,o)?t:(l=e,a=o)}var l,a,s=!1,c=void 0===o?null:o;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,o,i,r]);var f=l(e,d[0],d[1]);return s((function(){p.hasValue=!0,p.value=f}),[f]),u(f),f}},1688:(e,t,o)=>{"use strict";e.exports=o(3250)},2798:(e,t,o)=>{"use strict";e.exports=o(139)},6849:e=>{"use strict";e.exports=a},2618:e=>{"use strict";e.exports=s},6826:e=>{"use strict";e.exports=n},8891:e=>{"use strict";e.exports=o},1315:e=>{"use strict";e.exports=i},800:e=>{"use strict";e.exports=r},726:e=>{"use strict";e.exports=c},7756:e=>{"use strict";e.exports=l}},t={};function u(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,u),r.exports}u.d=(e,t)=>{for(var o in t)u.o(t,o)&&!u.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="";var d={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(d),u.d(d,{__set_webpack_public_path__:()=>F,default:()=>T});var e=u(8891),t=u(1688),o=u(2798),i=u(800);let r=null;var n=u(1315);const l=Symbol.for("react-redux-context"),a="undefined"!=typeof globalThis?globalThis:{};function s(){var e;if(!n.createContext)return{};const t=null!=(e=a[l])?e:a[l]=new Map;let o=t.get(n.createContext);return o||(o=n.createContext(null),t.set(n.createContext,o)),o}const c=s();function p(e=c){return function(){return(0,n.useContext)(e)}}const f=p();let m=null;u(8679),u(2973),"undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?n.useLayoutEffect:n.useEffect;let S=null;function y(e=c){const t=e===c?f:p(e);return function(){const{store:e}=t();return e}}const g=y();function h(e=c){const t=e===c?g:y(e);return function(){return t().dispatch}}const b=h();m=o.useSyncExternalStoreWithSelector,(e=>{S=e})(t.useSyncExternalStore),r=i.unstable_batchedUpdates;var v=u(6826),w=u(8845);const{useState:x,useEffect:A,useRef:_}=e.React;function T(t){var o;const[i,r]=x({}),[n,l]=x(null),[a,s]=x([]),[c,u]=x(null),[d,p]=x(),[f,m]=x(!1),[S,y]=x(null),g=(_(null),b());function h(e,t,o,i,r){let n;return n="column"===e?((e,t,o)=>{const i=[{type:"barSeries",id:"",name:"",x:t,y:"OBJECTID",colorType:"singleColor",stackedType:"stacked",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#5E8FD0",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-900)",width:0}},dataLabels:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--dark-600)",font:{family:"Avenir Next",size:10,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"top"}},displayPercentageOnDataLabel:!0,displayNumericValueOnDataLabel:!1,dataLabelsOffset:5,rotated:!1,dataTooltipVisible:!0,query:{where:`${o}=''`}}];for(const r in e){const n={type:"barSeries",id:r,name:r,x:t,y:"OBJECTID",colorType:"singleColor",stackedType:"stacked",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:`rgb(${e[r][0]}, ${e[r][1]}, ${e[r][2]})`,outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-900)",width:0}},dataLabels:{type:"chartText",visible:!1,content:{type:"esriTS",color:"var(--dark-600)",font:{family:"Avenir Next",size:10,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"top"}},rotated:!1,dataTooltipVisible:!0,query:{where:`${o}='${r}'`}};i.push(n)}const r={type:"barSeries",id:"__other-split-value__",name:"Undefined",x:t,y:"OBJECTID",colorType:"singleColor",stackedType:"stacked",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#D6D6D6",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-900)",width:0}},dataLabels:{type:"chartText",visible:!1,content:{type:"esriTS",color:"var(--dark-600)",font:{family:"Avenir Next",size:10,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"top"}},rotated:!1,dataTooltipVisible:!0,query:{where:"Tipo_accidente='__other-split-value__'"}};return i.push(r),i})(i,t,o):"widget_55"==r?((e,t)=>{const o=[{type:"pieSeries",colorType:"singleColor",id:"OBJECTID",name:"OBJECTID",x:e,y:"count_of_OBJECTID",innerRadius:0,startAngle:0,endAngle:360,displayNumericValueOnDataLabel:!0,displayPercentageOnDataLabel:!0,displayNumericValueOnTooltip:!0,displayPercentageOnTooltip:!0,dataLabelsOffset:-100,sliceGrouping:{sliceId:"__other-slice__",percentageThreshold:0,label:"Other",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#D6D6D6",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}}},numericValueFormat:{type:"number",intlOptions:{style:"decimal",useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:1}},percentValueFormat:{type:"number",intlOptions:{style:"percent",notation:"standard",minimumFractionDigits:0,maximumFractionDigits:1}},fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#D6D6D6",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}},dataLabels:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--dark-600)",font:{family:"Avenir Next",size:13,style:"normal",weight:"bold",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"middle",wrap:!0,maxWidth:100}},dataTooltipVisible:!0,query:{where:`${e}=''`},slices:[{sliceId:"",label:"",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#5E8FD0",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}}}]}];for(const e in t){const i={sliceId:e,label:e,fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:`rgb(${t[e][0]}, ${t[e][1]}, ${t[e][2]})`,outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}}};o[0].slices.push(i)}return o})(o,i):((e,t)=>{const o=[{type:"pieSeries",colorType:"singleColor",id:"OBJECTID",name:"OBJECTID",x:e,y:"count_of_OBJECTID",innerRadius:0,startAngle:0,endAngle:360,displayNumericValueOnDataLabel:!0,displayPercentageOnDataLabel:!1,displayNumericValueOnTooltip:!0,displayPercentageOnTooltip:!0,dataLabelsOffset:2,sliceGrouping:{sliceId:"__other-slice__",percentageThreshold:0,label:"Other",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#D6D6D6",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}}},numericValueFormat:{type:"number",intlOptions:{style:"decimal",useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:3}},percentValueFormat:{type:"number",intlOptions:{style:"percent",notation:"standard",minimumFractionDigits:0,maximumFractionDigits:3}},fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#D6D6D6",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}},dataLabels:{type:"chartText",visible:!1,content:{type:"esriTS",color:"var(--dark-600)",font:{family:"Avenir Next",size:8,style:"normal",weight:"bold",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"middle",wrap:!0,maxWidth:100}},dataTooltipVisible:!0,query:{where:`${e}=''`},slices:[{sliceId:"",label:"",fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:"#5E8FD0",outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}}}]}];for(const e in t){const i={sliceId:e,label:e,fillSymbol:{type:"esriSFS",style:"esriSFSSolid",color:`rgb(${t[e][0]}, ${t[e][1]}, ${t[e][2]})`,outline:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-100)",width:0}}};o[0].slices.push(i)}return o})(o,i),{tools:{cursorEnable:!0},template:e,webChart:{version:"7.3.1",id:e,type:"chart",axes:[{type:"chartAxis",visible:!0,isLogarithmic:!1,title:{type:"chartText",visible:!1,content:{type:"esriTS",color:"var(--dark-800)",font:{family:"Avenir Next",size:14,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"middle"}},labels:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--dark-500)",font:{family:"Avenir Next",size:14,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"middle"}},valueFormat:{type:"category",characterLimit:11},lineSymbol:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-800)",width:1},grid:{type:"esriSLS",style:"esriSLSDash",color:"var(--light-300)",width:0}},{type:"chartAxis",visible:!0,isLogarithmic:!1,title:{type:"chartText",visible:!1,content:{type:"esriTS",color:"var(--dark-800)",font:{family:"Avenir Next",size:14,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"middle"}},labels:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--dark-500)",font:{family:"Avenir Next",size:14,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",verticalAlignment:"middle"}},valueFormat:{type:"number",intlOptions:{style:"decimal",useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:0}},lineSymbol:{type:"esriSLS",style:"esriSLSSolid",color:"var(--light-800)",width:1},grid:{type:"esriSLS",style:"esriSLSDash",color:"var(--light-300)",width:0}}],background:"var(--white)",dataSource:{query:{groupByFieldsForStatistics:[t],outStatistics:[{statisticType:"count",onStatisticField:"OBJECTID",outStatisticFieldName:"count_of_OBJECTID"}],orderByFields:[`${t} ASC`],where:"column"===e?`${o}={value}`:""}},footer:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--dark-800)",font:{family:"Avenir Next",size:14,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",text:""}},legend:{type:"chartLegend",visible:"column"!==e,layout:"vertical",labelMaxWidth:200,title:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--dark-800)",font:{family:"Avenir Next",size:40,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",text:""}},body:{type:"esriTS",color:"var(--dark-800)",font:{family:"Avenir Next",size:9,style:"normal",weight:"bold",decoration:"none"},horizontalAlignment:"center",text:""},position:"right"},sortLabelsBy:"originalValue",rotated:!1,series:n,title:{type:"chartText",visible:!0,content:{type:"esriTS",color:"var(--black)",font:{family:"Avenir Next",size:24,style:"normal",weight:"normal",decoration:"none"},horizontalAlignment:"center",text:""}}}}}return A((()=>{if(d){const t=(0,e.getAppStore)().getState().appConfig;t.lastFilter=d.view.map.layers.items[17].definitionExpression,f&&(t.counter=t.counter?t.counter+1:1),g({type:"CHART_EJECUTADO"})}}),[f]),A((()=>{if(S&&f){const t={widget_2:c,widget_4:"Año",widget_5:"Mes",widget_6:"Dia",widget_7:"Mes_Año",widget_9:"PK",widget_10:"Kilometro",widget_102:"Año",widget_58:"Mes",widget_85:"Dia",widget_60:"Mes_Año",widget_68:"PK",widget_67:"Kilometro",widget_55:c,widget_132:"Año"};for(const o in a)"widget_2"===a[o].id||"widget_55"===a[o].id?(0,e.getAppStore)().dispatch(e.appActions.widgetConfigLoaded(a[o].id,h("pie",t[a[o].id],c,S,a[o].id))):"widget_89"===a[o].id||(0,e.getAppStore)().dispatch(e.appActions.widgetConfigLoaded(a[o].id,h("column",t[a[o].id],c,S,null)));(0,e.getAppStore)().getState().appConfig.campo=c,m(!1)}}),[c,S]),A((()=>{const t=(0,e.getAppStore)().getState().appConfig.widgets;r(t),l("widget_4")}),[]),A((()=>{if(i){const e=Object.values(i);s(e.filter((e=>"widgets/common/chart/"===e.uri)))}}),[i]),e.React.createElement("div",null,t.useMapWidgetIds&&1===t.useMapWidgetIds.length&&e.React.createElement(v.JimuMapViewComponent,{useMapWidgetId:null===(o=t.useMapWidgetIds)||void 0===o?void 0:o[0],onActiveViewChange:e=>{e&&p(e)}}),e.React.createElement("div",null,e.React.createElement(w.default,Object.assign({},t,{onUpdate:e=>{u(e)},onRun:e=>{m(e)},onAtt:e=>{y(e)}}))))}function F(e){u.p=e}})(),d})())}}}));